

@{
    ViewData["Title"] = "用户中心";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    #update_Name {
    
       border-style:none; 

    }
    #update_Name,#update_Names {
        font:600 26px  'inherit';
        line-height: 30px;
        height: 30px;
        max-width: 400px;    
        white-space: nowrap;
        
    }
    .update_spn {
    margin-left:-8px;
    font:500 15px '微软雅黑';
    color:#5aa7fb;
    }
 
</style>
<div class="container" >
    <div class="page-header"> 
        <form>
            <div class="row" >
                <div class="form-group col-12 col-sm-3" id="uploadForms" enctype='multipart/form-data'  >
                    <div class="fileinput fileinput-new" data-provides="fileinput" id="exampleInputUpload">
                        <div class="fileinput-new thumbnail" style="width: 200px;height: auto;max-height:150px;">
                            <img id='picImg' style="width: 100%;height: auto;max-height: 140px;" src="~/fileinput/noimage.png" alt="" />
                        </div>
                        <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
                        <div>
                            <span class="btn btn-primary btn-file">
                                <span class="fileinput-new">上传头像</span>
                                <span class="fileinput-exists">换一张</span>
                                <input type="file" name="pic1" id="picID" accept="image/gif,image/jpeg,image/x-png" />
                            </span>
                            <a class="btn btn-warning fileinput-exists" data-dismiss="fileinput">移除</a>
                        </div>
                    </div>
                </div>
                <div class="form-group col-12 col-sm-9">
                    <input id="update_Name" value=" @Model.Name" readonly="readonly">
                    <input id="update_Names" value=" @Model.Name" hidden="hidden">
                    <a id="update_Name_a" style="text-decoration:none;outline: none;" href="#" onclick="update('update_Name','update_Name_a')"><icon><img src="~/icon/编辑.png" /></icon><spn name="update_span">修改</spn> </a>
                </div>
            </div>

            <button type="button" id="uploadSubmit" class="btn btn-info">提交</button>
        </form>
    </div>
</div> 
<script src="~/fileinput/js/jquery.min.js"></script> 
<script src="~/fileinput/js/bootstrap-fileinput.js"></script>
<script type="text/javascript">
    $(function () {
        //比较简洁，细节可自行完善
        $('#uploadSubmit').click(function () { 
            var appDomain = "http://123.207.8.91:8081/";// var appDomain = "http://localhost:5000/";//
              var fileUpload = $("#picID").get(0);
            var files = fileUpload.files;
            var data = new FormData();
            for (var i = 0; i < files.length; i++) {
                data.append("222" + files[i].name, files[i]);
            }
            $.ajax({
                url: appDomain + 'api/Pictures',
                type: 'POST',
                data: data,
                async: false,
                cache: false,
                contentType: false,
                processData: false,
                success: function (data) {
                    console.log(data);
                    if (data.status) {
                        console.log('upload success');
                    } else {
                        console.log(data.message);
                    }
                },
                error: function (data) {
                    console.log(data.status);
                }
            });
        });
        
    })
    function update(input_Id, a_Id) {
        $("#" + input_Id).attr("hidden","hidden");
        $("#" + input_Id + "s").removeAttr("hidden" );
            $("#" + a_Id).attr("hidden","hidden");
        }
</script>